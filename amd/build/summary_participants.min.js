/**
 * Javascript for summary participants graph.
 *
 * @package    local_assessfreq
 * @copyright  2020 Matt Porritt <mattp@catalyst-au.net>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_assessfreq/summary_participants",["core/fragment","core/templates","core/str","core/notification"],(function(Fragment,Templates,Str,Notification){var Summary={chart:function(assessids,contextid){assessids.forEach((assessid=>{let chartElement=document.getElementById(assessid+"-summary-graph"),params={data:JSON.stringify({quiz:assessid,call:"participant_summary"})};Fragment.loadFragment("local_assessfreq","get_quiz_chart",contextid,params).done((response=>{let resObj=JSON.parse(response);if(1!=resObj.hasdata)Str.get_string("nodata","local_assessfreq").then((str=>{const noDatastr=document.createElement("h3");noDatastr.innerHTML=str,chartElement.innerHTML=noDatastr.outerHTML})).catch((()=>{Notification.exception(new Error("Failed to load string: nodata"))}));else{let legend={position:"left"},context={withtable:!1,chartdata:JSON.stringify(resObj.chart),aspect:!1,legend:JSON.stringify(legend)};Templates.render("local_assessfreq/chart",context).done(((html,js)=>{Templates.replaceNodeContents(chartElement,html,js)})).fail((()=>{Notification.exception(new Error("Failed to load chart template."))}))}})).fail((()=>{Notification.exception(new Error("Failed to load card."))}))}))}};return Summary}));

//# sourceMappingURL=summary_participants.min.js.map